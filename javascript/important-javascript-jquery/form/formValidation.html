<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email & Mobile Validation</title>
    <style type="text/css">
        *{padding:0;margin:0;box-sizing: border-box;}
        .form{max-width: 400px;width: 100%;display: flex;flex-direction: column;margin-inline: auto;background: #eee;padding: 24px;border: 1px solid #ccc;}
        .form .textInput{width: 100%;display: flex;flex-direction: column;row-gap: 8px;}
        .form .textInput:not(:last-child){margin-bottom: 16px;}
        .form .textInput .form-control, .form .btn{height: 38px;padding-inline: 8px;}
        .form .textInput .error {color: red; font-size: 12px;}
        .form .success {color: green; font-size: 14px; display: none; margin-top: 16px;text-align: center;}
    </style>
</head>
<body>
    <form id="form" class="form">
        <div class="textInput">
            <label for="firstName">First Name:</label>
            <input id="firstName" class="form-control" type="text" placeholder="First Name">
            <span class="error"></span>
        </div>

        <div class="textInput">
            <label for="lastName">Last Name:</label>
            <input id="lastName" class="form-control" type="text" placeholder="Last Name">
            <span class="error"></span>
        </div>
        
        <div class="textInput">
            <label for="dob">Date of Birth:</label>
            <input id="dob" class="form-control" type="date">
            <span class="error"></span>
        </div>
        
        <div class="textInput">
            <label for="country">Country:</label>
            <select id="country" class="form-control">
                <option value="">Select Country</option>
                <option value="USA">United States</option>
                <option value="UK">United Kingdom</option>
                <option value="India">India</option>
                <option value="Canada">Canada</option>
                <option value="Australia">Australia</option>
            </select>
            <span class="error"></span>
        </div>
        
        <div class="textInput">
            <label for="email">Email:</label>
            <input id="email" class="form-control" type="text" placeholder="Email address">
            <span class="error"></span>
        </div>
        
        <div class="textInput">
            <label for="mobile">Mobile:</label>
            <input id="mobile" class="form-control" type="text" placeholder="Mobile number">
            <span class="error"></span>
        </div>
        
        <button type="button" onclick="validate()" class="btn">Submit</button>

        <span class="success">Your form has been successfully submitted.</span>
    </form>
      
    <script>
        function validate() {
            let valid = true;
            valid &= validateName('firstName');
            valid &= validateName('lastName');
            valid &= validateDOB();
            valid &= validateCountry();
            valid &= validateEmail();
            valid &= validateMobile();
            
            if (valid) {
                document.querySelector(".success").style.display = "block";
                saveToLocalStorage();
            }
        }
    
        function showError(fieldId, message) {
            document.getElementById(fieldId).nextElementSibling.textContent = message;
        }
    
        function validateName(fieldId) {
            const nameInput = document.getElementById(fieldId);
            const namePattern = /^[A-Za-z]{2,}$/;
            if (!nameInput.value) {
                showError(fieldId, "This field is required.");
                return false;
            } else if (!namePattern.test(nameInput.value)) {
                showError(fieldId, "Only alphabets allowed (min 2 characters).");
                return false;
            }
            showError(fieldId, "");
            return true;
        }
    
        function validateDOB() {
            const dobInput = document.getElementById("dob");
            const dob = new Date(dobInput.value);
            const today = new Date();
            if (!dobInput.value || dob >= today) {
                showError("dob", "Enter a valid Date of Birth.");
                return false;
            }
            showError("dob", "");
            return true;
        }
    
        function validateCountry() {
            const countryInput = document.getElementById("country");
            if (!countryInput.value) {
                showError("country", "Please select a country.");
                return false;
            }
            showError("country", "");
            return true;
        }
    
        function validateEmail() {
            const emailInput = document.getElementById("email");
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/;
            if (!emailInput.value || !emailPattern.test(emailInput.value)) {
                showError("email", "Enter a valid email address.");
                return false;
            }
            showError("email", "");
            return true;
        }
    
        function validateMobile() {
            const mobileInput = document.getElementById("mobile");
            const mobilePattern = /^[0-9]{10,15}$/;
            if (!mobileInput.value || !mobilePattern.test(mobileInput.value)) {
                showError("mobile", "Enter a valid mobile number (10-15 digits).");
                return false;
            }
            showError("mobile", "");
            return true;
        }
    
        function saveToLocalStorage() {
            const formData = {
                firstName: document.getElementById("firstName").value,
                lastName: document.getElementById("lastName").value,
                dob: document.getElementById("dob").value,
                country: document.getElementById("country").value,
                email: document.getElementById("email").value,
                mobile: document.getElementById("mobile").value,
            };
    
            localStorage.setItem("formData", JSON.stringify(formData));
            console.log("Form data saved to localStorage:", formData);
        }
    
        // Function to populate form fields from localStorage if data exists
        function populateFormFromLocalStorage() {
            const savedData = localStorage.getItem("formData");
            if (savedData) {
                const formData = JSON.parse(savedData);
                document.getElementById("firstName").value = formData.firstName || "";
                document.getElementById("lastName").value = formData.lastName || "";
                document.getElementById("dob").value = formData.dob || "";
                document.getElementById("country").value = formData.country || "";
                document.getElementById("email").value = formData.email || "";
                document.getElementById("mobile").value = formData.mobile || "";
            }
        }
    
        // Call function to populate fields on page load
        window.onload = populateFormFromLocalStorage;
    </script>
</body>
</html>
